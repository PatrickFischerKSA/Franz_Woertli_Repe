<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Deutsch â†’ FranzÃ¶sisch â€“ Quiz</title>
<style>
body{font-family:system-ui,sans-serif;background:#f6f6f6;padding:2rem}
.card{background:#fff;padding:2rem;max-width:760px;margin:auto;border-radius:14px;box-shadow:0 6px 24px rgba(0,0,0,.15)}
h1{margin-top:0}
.correct{color:green;font-weight:bold}
.wrong{color:red;font-weight:bold}
.progress-bg{background:#ddd;border-radius:10px;overflow:hidden;margin-bottom:.3rem}
#progressBar{height:18px;width:0%;background:#4caf50}
button{margin-top:.4rem}
</style>
</head>
<body>

<!-- optionale MP3-Dateien (nicht im ZIP enthalten) -->
<audio id="a50" src="avignon.mp3"></audio>
<audio id="a60" src="ton-chemin.mp3"></audio>
<audio id="a70" src="regrette-rien.mp3"></audio>
<audio id="a80" src="mon-mec.mp3"></audio>
<audio id="a90" src="marseillaise.mp3"></audio>

<div class="card">
<h1>Deutsch â†’ FranzÃ¶sisch</h1>
<button id="muteBtn" onclick="toggleMute()">ðŸ”Š Ton an</button>

<div class="progress-bg"><div id="progressBar"></div></div>
<p id="progressText">Fortschritt: 0 %</p>

<h2 id="levelTitle"></h2>
<p id="prompt" style="font-size:1.2rem;font-weight:bold"></p>

<input id="answer" style="width:100%;padding:.6rem;font-size:1.1rem" autocomplete="off">
<button onclick="check()">Antwort prÃ¼fen</button>

<p id="feedback"></p>
<p id="hint"></p>
<p id="solution"></p>

<button onclick="next()">Weiter</button>
</div>

<script>
/* ====================== DATEN ====================== */

/* LEVEL 1 â€“ Wortschatz & SÃ¤tze */
const LEVEL1 = [
 {de:"der Schulanfang", fr:["la rentrÃ©e"]},
 {de:"das Buch", fr:["le livre"]},
 {de:"das Heft", fr:["le cahier"]},
 {de:"der Bleistift", fr:["le crayon"]},
 {de:"der Kugelschreiber", fr:["le stylo"]},
 {de:"der Radiergummi", fr:["la gomme"]},
 {de:"die Schule", fr:["lâ€™Ã©cole"]},
 {de:"das Klassenzimmer", fr:["la salle de classe"]},
 {de:"die Pause", fr:["la rÃ©crÃ©ation"]},
 {de:"die Familie", fr:["la famille"]},
 {de:"die Mutter", fr:["la mÃ¨re"]},
 {de:"der Vater", fr:["le pÃ¨re"]},
 {de:"die Schwester", fr:["la sÅ“ur"]},
 {de:"der Bruder", fr:["le frÃ¨re"]},
 {de:"die Grosseltern", fr:["les grands-parents"]},
 {de:"Ich habe Angst.", fr:["Jâ€™ai peur."]},
 {de:"Es regnet.", fr:["Il pleut."]},
 {de:"Es ist kalt.", fr:["Il fait froid."]},
 {de:"Es ist warm.", fr:["Il fait chaud."]},
 {de:"Wir gehen ins Kino.", fr:["Nous allons au cinÃ©ma."]},
 {de:"Ich denke, dass â€¦", fr:["Je pense que â€¦","Je pense que..."]},
 {de:"Das ist keine gute Idee.", fr:["Ce nâ€™est pas une bonne idÃ©e."]},
 {de:"Ich bin nicht einverstanden.", fr:["Je ne suis pas dâ€™accord."]},
 {de:"Der Unterricht endet am Mittag.", fr:["Les cours se terminent Ã  midi."]},
 {de:"Ich habe Hunger.", fr:["Jâ€™ai faim."]},
 {de:"Es war lecker.", fr:["Câ€™Ã©tait dÃ©licieux !"]}
];

/* LEVEL 2 â€“ Transfer (PrÃ¤sens & PassÃ© composÃ©) */
const LEVEL2 = [
 {de:"Ich gehe in die Schule.", fr:["Je vais Ã  lâ€™Ã©cole."]},
 {de:"Wir gehen ins Kino.", fr:["Nous allons au cinÃ©ma."]},
 {de:"Er ist ins Kino gegangen.", fr:["Il est allÃ© au cinÃ©ma."]},
 {de:"Wir haben einen Film gesehen.", fr:["Nous avons regardÃ© un film."]},
 {de:"Sie hatte Hunger.", fr:["Elle a eu faim."]},
 {de:"Der Unterricht hat am Mittag geendet.", fr:["Les cours se sont terminÃ©s Ã  midi."]},
 {de:"Ich habe gedacht, dass â€¦", fr:["Jâ€™ai pensÃ© que â€¦"]},
 {de:"Es hat geregnet.", fr:["Il a plu."]}
];

/* ====================== LOGIK ====================== */

let level = 1;
let data = shuffle(LEVEL1.slice());
let index = 0;
let attempts = 0;
let correct = 0;
let total = 0;
let muted = false;

const audios = {50:a50,60:a60,70:a70,80:a80,90:a90};

function normalize(s){
 return s.toLowerCase()
   .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
   .replace(/[â€™']/g,"'").trim();
}

function show(){
 attempts=0;
 feedback.textContent="";
 hint.textContent="";
 solution.textContent="";
 levelTitle.textContent = level===1 ? "Level 1 â€“ Wortschatz" : "Level 2 â€“ Transfer";
 prompt.textContent = data[index].de;
 answer.value="";
}

function check(){
 const user = normalize(answer.value);
 const sols = data[index].fr.map(normalize);

 if(sols.includes(user)){
   feedback.textContent="âœ“ Richtig";
   feedback.className="correct";
   correct++; total++; update();
 } else {
   attempts++;
   feedback.textContent="âœ— Falsch";
   feedback.className="wrong";
   if(attempts===2){
     hint.textContent="Hinweis: Artikel, Verbform, Akzente beachten.";
   }
   if(attempts>=3){
     solution.textContent="LÃ¶sung: " + data[index].fr[0];
     total++; update();
   }
 }
}

function next(){
 index++;
 if(index>=data.length){
   playFinal();
   if(level===1){
     level=2;
     data = shuffle(LEVEL2.slice());
     index=0;
     alert("Level 2 â€“ Transfer startet");
   } else {
     alert("Quiz beendet ðŸŽ‰");
     return;
   }
 }
 show();
}

function update(){
 const p = Math.round((correct/total)*100);
 progressBar.style.width = p + "%";
 progressText.textContent = "Fortschritt: " + p + " %";
}

function playFinal(){
 if(muted) return;
 const p = Math.round((correct/total)*100);
 let k=null;
 if(p>=90)k=90; else if(p>=80)k=80; else if(p>=70)k=70; else if(p>=60)k=60; else if(p>=50)k=50;
 if(k){
   Object.values(audios).forEach(a=>{a.pause();a.currentTime=0});
   audios[k].play();
 }
}

function toggleMute(){
 muted=!muted;
 muteBtn.textContent = muted ? "ðŸ”‡ Ton aus" : "ðŸ”Š Ton an";
 if(muted) Object.values(audios).forEach(a=>{a.pause();a.currentTime=0});
}

function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }

show();
</script>
</body>
</html>
