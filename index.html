<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Deutsch â†’ FranzÃ¶sisch â€“ Quiz</title>
<style>
body{font-family:system-ui,sans-serif;background:#f6f6f6;padding:2rem}
.card{background:#fff;padding:2rem;max-width:760px;margin:auto;border-radius:14px;box-shadow:0 6px 24px rgba(0,0,0,.15)}
h1{margin-top:0}
.correct{color:green;font-weight:bold}
.wrong{color:red;font-weight:bold}
.progress-bg{background:#ddd;border-radius:10px;overflow:hidden;margin-bottom:.3rem}
#progressBar{height:18px;width:0%;background:#4caf50}
.controls{margin-bottom:.6rem}
button{margin-right:.4rem;margin-top:.4rem}
</style>
</head>
<body>

<!-- optionale MP3-Dateien -->
<audio id="a50" src="avignon.mp3"></audio>
<audio id="a60" src="ton-chemin.mp3"></audio>
<audio id="a70" src="regrette-rien.mp3"></audio>
<audio id="a80" src="mon-mec.mp3"></audio>
<audio id="a90" src="marseillaise.mp3"></audio>

<div class="card">
<h1>Deutsch â†’ FranzÃ¶sisch</h1>

<div class="controls">
  <button id="muteBtn" type="button">ðŸ”Š Ton an</button>
  <button id="resetBtn" type="button">ðŸ”„ Reset</button>
</div>

<div class="progress-bg"><div id="progressBar"></div></div>
<p id="progressText">Fortschritt: 0 %</p>

<h2 id="levelTitle"></h2>
<p id="promptText" style="font-size:1.2rem;font-weight:bold"></p>

<input id="answerInput" style="width:100%;padding:.6rem;font-size:1.1rem" autocomplete="off">
<button id="checkBtn" type="button">Antwort prÃ¼fen</button>

<p id="feedback"></p>
<p id="hint"></p>
<p id="solution"></p>

<button id="nextBtn" type="button">Weiter</button>
</div>

<script>
/* DATEN */
const LEVEL1 = [
 {de:"Ich habe Hunger.", fr:["Jâ€™ai faim."]},
 {de:"Es regnet.", fr:["Il pleut."]},
 {de:"Ich habe Angst.", fr:["Jâ€™ai peur."]},
 {de:"Wir gehen ins Kino.", fr:["Nous allons au cinÃ©ma."]}
];

const LEVEL2 = [
 {de:"Ich gehe in die Schule.", fr:["Je vais Ã  lâ€™Ã©cole."]},
 {de:"Er ist ins Kino gegangen.", fr:["Il est allÃ© au cinÃ©ma."]}
];

/* STATE */
let level, data, index, attempts, correct, total, muted;

/* HELPERS */
function normalize(s){
 return (s??"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[â€™']/g,"'").trim();
}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

/* CORE */
function resetQuiz(){
 level=1;
 data=shuffle(LEVEL1.slice());
 index=0;
 attempts=0;
 correct=0;
 total=0;
 muted=false;
 document.getElementById("progressBar").style.width="0%";
 document.getElementById("progressText").textContent="Fortschritt: 0 %";
 document.getElementById("muteBtn").textContent="ðŸ”Š Ton an";
 document.getElementById("feedback").textContent="";
 document.getElementById("hint").textContent="";
 document.getElementById("solution").textContent="";
 show();
}

function show(){
 attempts=0;
 document.getElementById("levelTitle").textContent = level===1 ? "Level 1 â€“ Wortschatz" : "Level 2 â€“ Transfer";
 document.getElementById("promptText").textContent = data[index].de;
 document.getElementById("answerInput").value="";
}

function updateProgress(){
 const p= total ? Math.round((correct/total)*100):0;
 document.getElementById("progressBar").style.width=p+"%";
 document.getElementById("progressText").textContent="Fortschritt: "+p+" %";
}

function checkAnswer(){
 const user=normalize(document.getElementById("answerInput").value);
 const sols=data[index].fr.map(normalize);
 if(sols.includes(user)){
   document.getElementById("feedback").textContent="âœ“ Richtig";
   document.getElementById("feedback").className="correct";
   correct++; total++; updateProgress();
 } else {
   attempts++;
   document.getElementById("feedback").textContent="âœ— Falsch";
   document.getElementById("feedback").className="wrong";
   if(attempts===2) document.getElementById("hint").textContent="Hinweis: Artikel, Verbform, Akzente.";
   if(attempts>=3){
     document.getElementById("solution").textContent="LÃ¶sung: "+data[index].fr[0];
     total++; updateProgress();
   }
 }
}

function nextItem(){
 index++;
 if(index>=data.length){
   if(level===1){
     level=2;
     data=shuffle(LEVEL2.slice());
     index=0;
     alert("Level 2 startet");
   } else {
     alert("Quiz beendet ðŸŽ‰");
     return;
   }
 }
 show();
}

function toggleMute(){
 muted=!muted;
 document.getElementById("muteBtn").textContent = muted?"ðŸ”‡ Ton aus":"ðŸ”Š Ton an";
}

/* EVENTS */
document.getElementById("checkBtn").onclick=checkAnswer;
document.getElementById("nextBtn").onclick=nextItem;
document.getElementById("muteBtn").onclick=toggleMute;
document.getElementById("resetBtn").onclick=resetQuiz;

/* START */
resetQuiz();
</script>
</body>
</html>
